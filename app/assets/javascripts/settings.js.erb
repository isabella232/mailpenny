<%[5,10,20,50].map{|x| x * 100}.each do |amount|%>

$('#btn-payment-<%= amount %>')
  .on('click', function (e) {
    // Open Checkout with further options
    StripeCheckout.configure({
      key: '<%= Rails.configuration.stripe[:publishable_key] %>',
      image: '/img/logo/icon-black-transparent.png',
      locale: 'auto',
      token: function (token) {
        $.post('/charges', {
          stripeToken: token.id,
          amount: <%= amount %>,
          user: thisUser.id
        });
        console.log("<%= amount %>")
        }
    }).open({
      name: 'Mailman',
      description: "Top-up",
      amount: <%= amount %>,
      label: "Add $<%=amount / 100 %>",
      panelLabel: "Pay {{amount}}",
      bitcoin: "true",
      alipay: "true",
      email: thisUser.email,
      allowRememberMe: "true",
      alipayReusable: "true",
      locale: "auto"
    });
    e.preventDefault();
  });

// Close Checkout on page navigation
$(window)
  .on('popstate', function () {
    handler<%= amount %>.close();
  });

<% end %>
